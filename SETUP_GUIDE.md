# üöÄ Setup Guide - New Theme Architecture

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ–ø–µ—Ä—å —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –Ω–∞ –¥–≤–∞ —Ç–∏–ø–∞ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

### 1. üé® **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** (`.env.local`)
**–ß—Ç–æ**: –¶–≤–µ—Ç–∞, —Ñ–ª–∞–≥–∏ –∞–Ω–∏–º–∞—Ü–∏–π  
**–ü–æ—á–µ–º—É**: –†–µ–¥–∫–æ –º–µ–Ω—è—é—Ç—Å—è, –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ  
**–ì–¥–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å**: `.env.local` —Ñ–∞–π–ª

### 2. üìù **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** (Database: `dynamic_settings`)
**–ß—Ç–æ**: –¢–µ–∫—Å—Ç—ã –æ—Ñ—Ñ–µ—Ä–æ–≤, event announcements, labels  
**–ü–æ—á–µ–º—É**: –ú–µ–Ω—è—é—Ç—Å—è —á–∞—Å—Ç–æ, –Ω—É–∂–Ω–∞ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å  
**–ì–¥–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å**: `/admin/settings`

---

## üìã –®–∞–≥–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

### –®–∞–≥ 1: –°–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É dynamic_settings

–í Supabase SQL Editor –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```sql
-- –§–∞–π–ª: supabase/create-dynamic-settings-table.sql
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞:
- –°–æ–∑–¥–∞—Å—Ç —Ç–∞–±–ª–∏—Ü—É `dynamic_settings`
- –ú–∏–≥—Ä–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å—Ç–∞—Ä–æ–π —Ç–∞–±–ª–∏—Ü—ã `theme` (–µ—Å–ª–∏ –µ—Å—Ç—å)
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ RLS policies

### –®–∞–≥ 2: –°–æ–∑–¥–∞–π—Ç–µ `.env.local`

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.local` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
# Supabase (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
NEXT_PUBLIC_SUPABASE_URL=your-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-key
SUPABASE_SERVICE_ROLE_KEY=your-service-key

# ==================================
# STATIC THEME CONFIGURATION
# ==================================
# Colors and animation flags

# Main Colors
NEXT_PUBLIC_PRIMARY_COLOR=#536C4A
NEXT_PUBLIC_SECONDARY_COLOR=#B0BF93

# Offer Animation Settings
NEXT_PUBLIC_OFFER_PARTICLES=true
NEXT_PUBLIC_OFFER_COSMIC_GLOW=true
NEXT_PUBLIC_OFFER_FLOATING=true
NEXT_PUBLIC_OFFER_PULSE=true
NEXT_PUBLIC_OFFER_INNER_LIGHT=true

# Menu Page Colors
NEXT_PUBLIC_ITEM_TEXT_COLOR=#1f2937
NEXT_PUBLIC_CATEGORY_TEXT_COLOR=#ffffff
NEXT_PUBLIC_CARD_BG_COLOR=#ffffff
NEXT_PUBLIC_FEATURE_COLOR=#536C4A

# Legend Colors (Strain Types)
NEXT_PUBLIC_LEGEND_HYBRID_COLOR=#4f7bff
NEXT_PUBLIC_LEGEND_SATIVA_COLOR=#ff6633
NEXT_PUBLIC_LEGEND_INDICA_COLOR=#38b24f
```

### –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ dev server

```bash
npm run dev
```

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ç–µ–∫—Å—Ç—ã

–û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å: **http://localhost:3000/admin/settings**

–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å:
- **Main Page Section**:
  - Offer Text
  - Event Text  
  - Hide Offer (checkbox)
- **Menu Labels**:
  - Tier 0-3 labels (1PC, 1G, 5G+, 20G+)
- **Legend Labels**:
  - Hybrid, Sativa, Indica
  - Feature & Tip labels

### –®–∞–≥ 5: (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—É—é —Ç–∞–±–ª–∏—Ü—É theme

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç:

```sql
-- –§–∞–π–ª: supabase/drop-theme-table.sql
```

‚ö†Ô∏è **–í–ê–ñ–ù–û**: –°–Ω–∞—á–∞–ª–∞ —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `dynamic_settings` —Ä–∞–±–æ—Ç–∞–µ—Ç!

---

## üéØ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

### –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (`/`)
1. **SSR**: –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ü–≤–µ—Ç–∞ –∏–∑ `.env` ‚Üí –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
2. **Client**: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ç–µ–∫—Å—Ç—ã –∏–∑ `dynamic_settings` ‚Üí –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–µ–Ω–¥–µ—Ä
3. **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≥—Ä—É–∑–∏—Ç—Å—è **–±—ã—Å—Ç—Ä–æ**, —Ç–µ–∫—Å—Ç—ã –ø–æ—è–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ ~100-200ms

### –°—Ç—Ä–∞–Ω–∏—Ü–∞ –º–µ–Ω—é (`/menu`)
1. **SSR**: –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç:
   - Menu items (–∫–∞–∫ –æ–±—ã—á–Ω–æ)
   - Dynamic labels –∏–∑ `dynamic_settings`
2. **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –í—Å—ë –≥—Ä—É–∑–∏—Ç—Å—è –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º, –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫

---

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ |
|---------|-----|--------|
| Homepage TTFB | ~800ms | ~50-100ms |
| –ë–ª–æ–∫–∏—Ä—É—é—â–∏—Ö DB –∑–∞–ø—Ä–æ—Å–æ–≤ | 1-2 | 0 |
| –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ | None | 1 hour |
| –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å | –ù–µ —Ä–∞–±–æ—Ç–∞–ª–∞ | –†–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ |

---

## üîß –ö–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏?

### –ò–∑–º–µ–Ω–∏—Ç—å —Ü–≤–µ—Ç–∞
1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env.local`
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ `npm run dev`

### –ò–∑–º–µ–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç—ã/labels
1. –û—Ç–∫—Ä–æ–π—Ç–µ `/admin/settings`
2. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –Ω—É–∂–Ω—ã–µ –ø–æ–ª—è
3. –ù–∞–∂–º–∏—Ç–µ "Save Settings"
4. –ò–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—è–≤—è—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ (–±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞!)

---

## ‚ùì FAQ

**Q: –ü–æ—á–µ–º—É offer_text —Ç–µ–ø–µ—Ä—å –≤ –ë–î, –∞ –Ω–µ –≤ .env?**  
A: –ü–æ—Ç–æ–º—É —á—Ç–æ –æ—Ñ—Ñ–µ—Ä—ã –º–µ–Ω—è—é—Ç—Å—è —á–∞—Å—Ç–æ. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏ –Ω–µ –∑–∞–º–µ–¥–ª—è—é—Ç SSR.

**Q: –ù—É–∂–Ω–æ –ª–∏ –¥–µ–ø–ª–æ–∏—Ç—å –∫–∞–∂–¥—ã–π —Ä–∞–∑ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞?**  
A: –ù–µ—Ç! –¢–µ–∫—Å—Ç—ã –≤ –ë–î –º–µ–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –±–µ–∑ –¥–µ–ø–ª–æ—è.

**Q: –ê –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å —Ü–≤–µ—Ç?**  
A: –¶–≤–µ—Ç–∞ –≤ `.env` ‚Üí –Ω—É–∂–µ–Ω redeploy (–Ω–æ —Ü–≤–µ—Ç–∞ –º–µ–Ω—è—é—Ç—Å—è —Ä–µ–¥–∫–æ).

**Q: –ß—Ç–æ –µ—Å–ª–∏ —Ç–∞–±–ª–∏—Ü–∞ dynamic_settings –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞?**  
A: –°–∞–π—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å fallback –∑–Ω–∞—á–µ–Ω–∏—è–º–∏. –ì–ª–∞–≤–Ω–∞—è –Ω–µ —Å–ª–æ–º–∞–µ—Ç—Å—è!

**Q: –°—Ç–∞—Ä–∞—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å /admin/theme?**  
A: Deprecated. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/admin/settings` –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫.

---

## üö® Troubleshooting

### Offer banner –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "Loading..."
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ `dynamic_settings` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ RLS policies (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å public read)
- –û—Ç–∫—Ä–æ–π—Ç–µ DevTools Console –¥–ª—è –æ—à–∏–±–æ–∫

### –¶–≤–µ—Ç–∞ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `.env.local` —Å–æ–∑–¥–∞–Ω
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ `npm run dev`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å `NEXT_PUBLIC_`

### Labels –Ω–µ –º–µ–Ω—è—é—Ç—Å—è –≤ –º–µ–Ω—é
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏—Å—å –≤ `dynamic_settings`
- –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É `/menu`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `revalidate` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `src/lib/theme-config.ts` - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ .env
- `src/lib/dynamic-settings.ts` - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ –ë–î
- `src/components/DynamicOfferBanner.tsx` - async offer banner
- `src/app/admin/settings/page.tsx` - –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- `supabase/create-dynamic-settings-table.sql` - –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è
- `supabase/drop-theme-table.sql` - –º–∏–≥—Ä–∞—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è —Å—Ç–∞—Ä–æ–π —Ç–∞–±–ª–∏—Ü—ã

