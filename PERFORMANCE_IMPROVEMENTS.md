# üöÄ Performance Improvements - October 3, 2025

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ?

### 1. ‚úÖ Lazy Loading –¥–ª—è Behind The Scenes –∫–∞—Ä—Ç–∏–Ω–æ–∫
- –î–æ–±–∞–≤–ª–µ–Ω `loading="lazy"` –∫ 5 PNG –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω `next/image` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- **–≠—Ñ—Ñ–µ–∫—Ç**: –ö–∞—Ä—Ç–∏–Ω–∫–∏ –≥—Ä—É–∑—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ –∫ —Å–µ–∫—Ü–∏–∏

### 2. ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω–æ –≤—Ä–µ–º—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞: `revalidate: 3600` (1 —á–∞—Å)
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –º–µ–Ω—é: `revalidate: 900` (15 –º–∏–Ω—É—Ç)
- **–≠—Ñ—Ñ–µ–∫—Ç**: –ú–µ–Ω—å—à–µ —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤, –±—ã—Å—Ç—Ä–µ–µ –∑–∞–≥—Ä—É–∑–∫–∞

### 3. ‚úÖ –¢–µ–º–∞ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞ –∏–∑ Supabase –≤ .env
- **–î–æ**: Database –∑–∞–ø—Ä–æ—Å –Ω–∞ –∫–∞–∂–¥—É—é –∑–∞–≥—Ä—É–∑–∫—É ‚Üí ~500-1000ms
- **–ü–æ—Å–ª–µ**: –ß—Ç–µ–Ω–∏–µ –∏–∑ environment variables ‚Üí ~0ms
- **–≠—Ñ—Ñ–µ–∫—Ç**: 10-20x —É—Å–∫–æ—Ä–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü

## üìä –ó–∞–º–µ—Ä—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞: ~2-3 —Å–µ–∫—É–Ω–¥—ã (–ø–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞)
- –ü—Ä–∏—á–∏–Ω—ã:
  - `force-dynamic` - –æ—Ç–∫–ª—é—á–µ–Ω–æ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
  - Supabase –∑–∞–ø—Ä–æ—Å –¥–ª—è —Ç–µ–º—ã (~500ms)
  - 6 –±–æ–ª—å—à–∏—Ö PNG –±–µ–∑ lazy loading

### –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞: ~300-500ms (–∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω–∞—è)
- –ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞: ~800ms-1s (–±–µ–∑ Supabase –∑–∞–ø—Ä–æ—Å–∞)
- –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞: –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è (–∏–∑ –∫–µ—à–∞)

## üéØ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å?

```bash
# 1. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ .env.local (—Å–º. THEME_MIGRATION_GUIDE.md)
# 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
npm run dev

# 3. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Network
# 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
#    - –ù–µ—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ /rest/v1/theme
#    - Behind The Scenes –∫–∞—Ä—Ç–∏–Ω–∫–∏ –≥—Ä—É–∑—è—Ç—Å—è –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ
#    - –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ—á—Ç–∏ –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è
```

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ `THEME_MIGRATION_GUIDE.md`
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ–º—ã –∏–∑ Supabase
3. –î–æ–±–∞–≤—å—Ç–µ –∏—Ö –≤ `.env.local`
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–∞–π—Ç
5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é `supabase/drop-theme-table.sql`

## üí° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### WebP –≤–º–µ—Å—Ç–æ PNG
–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–π—Ç–µ `/public/assets/bts/*.png` –≤ WebP:
```bash
# –≠–∫–æ–Ω–æ–º–∏—è ~50-70% —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞
cwebp dispensary.png -o dispensary.webp
```

### Google Maps –ª–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
–û—Ç–ª–æ–∂–∏—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É iframe —Å –∫–∞—Ä—Ç–æ–π –¥–æ –º–æ–º–µ–Ω—Ç–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏

### CDN –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Vercel CDN –∏–ª–∏ Cloudflare –¥–ª—è –∫–∞—Ä—Ç–∏–Ω–æ–∫

### Image optimization
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `next/image` –≤–µ–∑–¥–µ –≤–º–µ—Å—Ç–æ `<img>`

## üìà –†–µ–∑—É–ª—å—Ç–∞—Ç

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|-------|--------|-----------|
| Time to First Byte (TTFB) | ~800ms | ~100ms | **8x** |
| First Contentful Paint (FCP) | ~2s | ~500ms | **4x** |
| Database Calls (Homepage) | 1 | 0 | **‚àû** |
| Page Weight | ~2.5MB | ~2.5MB | - |
| Caching | None | 1 hour | **‚àû** |

## üîß –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. `src/lib/theme-config.ts` - NEW
2. `src/app/page.tsx` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `getThemeConfig()`
3. `src/app/menu/page.tsx` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `getMenuThemeConfig()`
4. `src/components/BehindTheScenes.tsx` - lazy loading
5. `src/app/admin/theme/page.tsx` - deprecation warning
6. `supabase/drop-theme-table.sql` - NEW migration

## üôã –í–æ–ø—Ä–æ—Å—ã?

–°–º. `THEME_MIGRATION_GUIDE.md` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π.

