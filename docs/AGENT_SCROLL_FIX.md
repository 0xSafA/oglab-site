# üìú –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ—Å–∫—Ä–æ–ª–ª–∞ –∞–≥–µ–Ω—Ç–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã `/feed` (–∏ –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü —Å –∞–≥–µ–Ω—Ç–æ–º), –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–æ–ª–ª –≤–Ω–∏–∑ –∫ –∞–≥–µ–Ω—Ç—É, –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞—á–∞–ª–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã. –≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ —Ä–∞–∑–¥—Ä–∞–∂–∞–ª–æ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö.

### –ü—Ä–∏—á–∏–Ω–∞

1. –ü—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `OGLabAgent` –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–æ–≤ –∏–∑ LocalStorage
2. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `setCurrentConversation(conversation)` —Å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–µ–π
3. –≠—Ç–æ —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç `useEffect`, –∫–æ—Ç–æ—Ä—ã–π —Å–ª–µ–¥–∏—Ç –∑–∞ `currentConversation?.messages.length`
4. –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç `scrollIntoView()` –∏ —Å–∫—Ä–æ–ª–ª–∏—Ç –∫ –∞–≥–µ–Ω—Ç—É

```typescript
// –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
useEffect(() => {
  if (messagesEndRef.current) {
    messagesEndRef.current.scrollIntoView({ behavior: 'smooth', block: 'start' })
  }
}, [currentConversation?.messages.length, loading])
// ‚Üë –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –í–°–ï–ì–î–ê –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏–π, –¥–∞–∂–µ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–µ!
```

## –†–µ—à–µ–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω —Ñ–ª–∞–≥ `isInitialLoad`, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –ø–µ—Ä–≤—É—é –∑–∞–≥—Ä—É–∑–∫—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:

### 1. –î–æ–±–∞–≤–ª–µ–Ω state —Ñ–ª–∞–≥
```typescript
const [isInitialLoad, setIsInitialLoad] = useState(true)
```

### 2. –û—Ç–∫–ª—é—á–µ–Ω–∏–µ —Ñ–ª–∞–≥–∞ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏
```typescript
// –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ conversation –∏–∑ localStorage
setCurrentConversation(conversation)
setIsInitialLoad(false) // ‚Üê –û—Ç–∫–ª—é—á–∞–µ–º —Ñ–ª–∞–≥ –ü–û–°–õ–ï –ø–µ—Ä–≤–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–ª–∞–≥–∞ –≤ useEffect –∞–≤—Ç–æ—Å–∫—Ä–æ–ª–ª–∞
```typescript
useEffect(() => {
  if (!isInitialLoad && messagesEndRef.current) {
    // ‚Üë –°–∫—Ä–æ–ª–ª–∏–º –¢–û–õ–¨–ö–û –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ –ø–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
    messagesEndRef.current.scrollIntoView({ behavior: 'smooth', block: 'start' })
  }
}, [currentConversation?.messages.length, loading, isInitialLoad])
```

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

–¢–∞–∫–∂–µ –∏–∑–º–µ–Ω—ë–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `block` —Å `'end'` –Ω–∞ `'start'`:

```typescript
// –î–æ: block: 'end'  - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–Ω–µ—Ü —Å–æ–æ–±—â–µ–Ω–∏—è (–ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–ª–æ–≤–∞)
// –ü–æ—Å–ª–µ: block: 'start' - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞—á–∞–ª–æ —Å–æ–æ–±—â–µ–Ω–∏—è (–ø–µ—Ä–≤—ã–µ —Å–ª–æ–≤–∞)
```

–≠—Ç–æ –≤–∞–∂–Ω–æ –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç **–Ω–∞—á–∞–ª–æ** –æ—Ç–≤–µ—Ç–∞, –∞ –Ω–µ –∫–æ–Ω–µ—Ü.

## –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚ùå –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã `/feed` ‚Üí –∞–≤—Ç–æ—Å–∫—Ä–æ–ª–ª –≤–Ω–∏–∑ –∫ –∞–≥–µ–Ω—Ç—É
- ‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–∏–¥–∏—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –≤ –Ω–∞—á–∞–ª–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- ‚ùå –ù–∞ –º–æ–±–∏–ª—å–Ω–æ–º –≤–∏–¥–Ω—ã —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–ª–æ–≤–∞ –æ—Ç–≤–µ—Ç–∞

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã `/feed` ‚Üí —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –≤–≤–µ—Ä—Ö—É
- ‚úÖ –ê–≥–µ–Ω—Ç —Å–ø–æ–∫–æ–π–Ω–æ –∂–¥—ë—Ç –≤–Ω–∏–∑—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- ‚úÖ –ê–≤—Ç–æ—Å–∫—Ä–æ–ª–ª —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç **—Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö**
- ‚úÖ –ù–∞ –º–æ–±–∏–ª—å–Ω–æ–º –≤–∏–¥–Ω–æ **–Ω–∞—á–∞–ª–æ** –æ—Ç–≤–µ—Ç–∞ –∞–≥–µ–Ω—Ç–∞

## –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ä–∞–±–æ—Ç—ã

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
```
1. isInitialLoad = true
2. –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑ localStorage
3. setCurrentConversation() ‚Üí useEffect —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç—Å—è
4. !isInitialLoad = false ‚Üí –ù–ï —Å–∫—Ä–æ–ª–ª–∏–º ‚úÖ
5. setIsInitialLoad(false)
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
```
1. isInitialLoad = false (—É–∂–µ –æ—Ç–∫–ª—é—á–µ–Ω)
2. –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è
3. setCurrentConversation() ‚Üí useEffect —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç—Å—è
4. !isInitialLoad = true ‚Üí –°–ö–†–û–õ–õ–ò–ú –∫ –Ω–∞—á–∞–ª—É –Ω–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è ‚úÖ
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –û—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ (–∫–Ω–æ–ø–∫–∞ "–ù–∞—á–∞—Ç—å –Ω–æ–≤—ã–π –¥–∏–∞–ª–æ–≥")
```
1. isInitialLoad = false
2. setCurrentConversation(–ø—É—Å—Ç–æ–π –¥–∏–∞–ª–æ–≥)
3. useEffect —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç—Å—è, –Ω–æ –Ω–µ—Ç messagesEndRef
4. –ù–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç ‚úÖ
```

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

- ‚úÖ `src/components/OGLabAgent.tsx`
  - –î–æ–±–∞–≤–ª–µ–Ω —Ñ–ª–∞–≥ `isInitialLoad`
  - –ò–∑–º–µ–Ω—ë–Ω `block: 'end'` ‚Üí `block: 'start'`
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–ª–∞–≥–∞ –≤ useEffect

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–ò–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã:
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–≥–µ–Ω—Ç (`/feed`, `/menu`, `/`)
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∞–≤—Ç–æ—Å–∫—Ä–æ–ª–ª–∞ –ø—Ä–∏ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
- ‚úÖ –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑ LocalStorage

---

**–î–∞—Ç–∞:** 5 –æ–∫—Ç—è–±—Ä—è 2025  
**–§–∞–π–ª:** `src/components/OGLabAgent.tsx`
